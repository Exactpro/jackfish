#Id;#TestCase;#Kind;#Depends;#For
EXPECTED;;;;
    #Id;#Global;#RawTable
    table;1;Table
    @;On;name;operation;result
    0;x;Button10;Do.get();'Button'
    1;x;Button11;Do.get();'Button'
    2;x;Button12;Do.get();'Button'
    3;x;Button13;Do.get();'Button'
    4;x;Button20;Do.get();'Button'
    5;x;Button21;Do.get();'Button'
    6;x;Button22;Do.get();'Button'
    7;x;Button23;Do.get();'Button'
    8;x;Button30;Do.get();'Button'
    9;x;Button31;Do.get();'Button'
    10;x;Button32;Do.get();'Button'
    11;x;Button33;Do.get();'Button'
    12;;ButtonMany;Do.count();2
    13;;ButtonManyNotPass;Do.count();1
    14;;ButtonManyNotFail;Do.count();ErrorKind.ELEMENT_NOT_FOUND
    #EndRawTable

    #Action;$Table;$Expression
    TableConsiderColumnsAs;table;'result'


#Id;#TestCase;#Kind;#Depends;#For
INIT;;;;
    #Call;plugin
    RUN;'Web'

    #Call;plugin
    RUN;'Swing'

    #Call;plugin
    RUN;'Win'

    #Id;#Action;$Decoraded
    RESTBL1;ResultTable;true

    #Action;$Table;$Title;$BeforeTestCase
    TableReport;RESTBL1.Out;'result';'INIT'


#Id;#TestCase;#Kind;#Depends;#For
SUBCASES;;;;
    #Id;#SubCase;plugin
    CLOSE;close;plugin
        #Id;#Action;$AppConnection
        APPSTP1;ApplicationStop;appCon

        #Action;$Table;$Title;$BeforeTestCase
        TableReport;table_result;'Result';'INIT'

    #EndSubCase

    #Id;#SubCase;plugin
    START;start;plugin
        #Id;#Action;Plugin;Control;Operation;Expected;Actual;Result
        TBL1;TableCreate;;;;;;

        #Id;#Global;#Let
        table_result;1;TBL1.Out

        #If
        plugin == 'Web'
            #Id;#Action;$AppId;Browser;URL
            APPSTR1;ApplicationStart;mockWebApp;mockWebBrowser;mockWebURL

            #Id;#Global;#Let
            appCon;1;APPSTR1.Out

        #EndIf

        #If
        plugin == 'Swing'
            #Id;#Action;$AppId;Jar;Args;MainClass
            APPSTR1;ApplicationStart;mockSwingApp;mockSwingJar;'';mockSwingClass

            #Id;#Global;#Let
            appCon;1;APPSTR1.Out

        #EndIf

        #If
        plugin == 'Win'
            #Id;#Action;$AppId;Exec;WorkDir;Args
            APPSTR1;ApplicationStart;mockWinApp;mockWinExec;mockWinDir;''

            #Id;#Global;#Let
            appCon;1;APPSTR1.Out

        #EndIf

        #Id;#Global;#Let
        failed;1;false

    #EndSubCase

    #Id;#SubCase;plugin
    RUN;Run;'Win'
        #Call;plugin
        START;plugin

        #Step;#Kind;#For;#Depends
        '\'' + plugin + '\' plugin';;;
            #Id;#Let
            map;new LinkedHashMap()

            #ForEach;#In
            row;table
                #Let
                map.put(row.name, row.operation)

            #EndForEach

            #Id;#IgnoreErr;#Action;$Dialog;$AppConnection;$Fields;$StopOnFail
            DLG;1;DialogFill;'Matchers';appCon;map;false

            #Id;#Let
            resultMap;new LinkedHashMap()

            #Let
            resultMap.putAll(DLG.Out)

            #Let
            resultMap.putAll(DLG.Errors)

            #ForEach;#In
            row;table
                #Id;#Let
                expected;row.result

                #Id;#Let
                actual;resultMap.get(row.name)

                #Assert;#Message
                expected.toString() == actual.toString();expected.toString() + ' not equal ' + actual.toString()

                #OnError

            #EndForEach

        #EndStep

        #Call;plugin
        CLOSE;plugin

    #EndSubCase


